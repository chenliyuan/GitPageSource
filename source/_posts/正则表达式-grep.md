title: 正则表达式+grep
author: 躲不掉的风
date: 2019-11-10 15:30:42
tags:
---
#### 正则表表达式
- shell 通配符不区分大小写，正则区分;  
- 是一种字符模式（pattern）；  
- 绝大部分正则表达式都被放在两个正斜杠之间；  
- 元字符是最重要的概念;  
- 习惯:加单引号如  grep '^root' /etc/passwd   

##### 基本元字符
	^ 行首定位符
	$ 行尾定位符
	.指的是任意一个字符
	* 单独不能活，指的是前面字符出现次数>=0
	.*任意多个字符（无敌了）
	[]匹配指定范围内的一个字符 [lL]ove
	[ - ]匹配指定范围内的一个字符 [a-z0-9]ove
	[^]用来匹配不在指定范围内的字符
		注意与外面的^的区别：外面的指的是行首，[]里面的指的是取反，如[^0-9A-Z]love不在0-9和A-Z范围内的一个字符
	\ 用来转义后面的字符，使得后面字符失去元字符作用
	\<词首定位符
	\>词尾定位符 \<love\>指的是love这个单词
	\(..\)匹配稍后使用的字符的标签  如vim中替换:%s#\(10.18.40.\)#\1200#   其中\1替代的是第一个括号的内容
	x\{m\}x重复出现m次  o\{5\}
	x\{m,\}x重复出现m次及以上 o\{5,\}
	x\{m,n\}x重复出现m次到n次 o\{5,8\}
	\+
	\|
##### 扩展元字符		
	+ 单独不能活，指的是前面字符出现次数>=1  
		grep 'ro\+t' /etc/passwd  或者 egrep 'ro+t' /etc/passwd  （grep不支持元字符，需要转义，或者替换成egrep）
	? 单独不能活，指的是前面字符出现次数0次或者1次
	a|b 匹配a或b
	()组字符  ov+ 指的是v出现1次或多次 (ov)+ 指的是ov出现1次或多次 
	(..)(..)\1\2 标签匹配字符 （love)able\1er 	
	x{m}x重复出现m次  o{5}
	x{m,}x重复出现m次及以上 o｛5,}
	x{m,n}x重复出现m次到n次 o{5,8}

#### grep/egrep/fgrep
  grep：支持基本元字符  grep -e 等价于egrep  
  egrep:支持扩展元字符  
  fgrep   
    
    格式： grep [选项] PATTERN filename1 filename2
    如：grep -i 'Tom' /etc/passwd
    
   特别可以使用：
   
	    \w 代表所有字母与数字  等价于[a-zA-Z0-9]
	    \W 代表所有字母与数字之外的字符   等价于[^a-zA-Z0-9]
	    \b 词边界 等价于\< \>
        
	选项参数：
	-i  忽略大小写
	-q   quiet  无输出
	-v    反向查找
	grep --help|grep '\-v'
    -r/-R 针对目录文件
    -o  only match 只打印找到的内容，非匹配的整行
    -n 显示行号
    -l 显示匹配的目录  grep -l 'root' /etc/passwd  /etc/shadow /etc/hosts
    -A  后几行
    -B  前几行
    -C  前后几行
