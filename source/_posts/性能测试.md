title: 性能测试
author: 躲不掉的风
date: 2019-10-05 22:01:07
tags:
---
- **重要指标**

TPS ：是TransactionsPerSecond的缩写，也就是事务数/秒

QPS：Queries Per Second意思是“每秒查询率

区别：  

    tps，即每秒处理事务数，每个事务包括了如下3个过程：a.用户请求服务器
    b.服务器自己的内部处理（包含应用服务器、数据库服务器等）c.服务器返回给用户
    如果每秒能够完成N个这三个过程，tps就是N；

    qps，如果是对一个页面请求一次，形成一个tps，但一次页面请求，可能产生多次对服务器的请求（页面上有很多**html资源，比如图片**等），服务器对这些请求，就可计入“qps”之中；

    但是，如今的项目基本上都是前后端分离的，性能也分为前端性能和后端性能，通常默认是后端性能，即服务端性能，也就是对服务端接口做压测

    如果是对一个接口（单场景）压测，且这个接口内部不会再去请求其它接口，那么tps=qps，否则，tps≠qps

    如果是对多个接口（混合场景）压测，不加事务控制器，jmeter会统计每个接口的tps，而混合场景是要测试这个场景的tps，显然这样得不到混合场景的tps，所以，要加了事物控制器，结果才是整个场景的tps
    
**找到平衡点**

1.尽可能多的做不同并发数下的压测，记录下响应时间（1s以内）和最大tps，当然，服务器端，各个服务器的资源利用率在可接受范围内（每个公司不一样，我们是90%以内）；

2.然后根据获取到的不同并发下的指标数据（并发数、tps、响应时间），画出上图，关注右侧的交点，即tps下降的地方和响应时间的交点，这个点的tps最大，如果响应时间在1s以内，此时并发数也是比较大的，这个点就可以认为是三个指标都不错的平衡点（当然，我这里把tps放在第一位优先考虑了，这个就看大家最在乎哪个指标了，排个优先级）；如果响应时间大于1s，最佳平衡点就往左找，找到响应时间为1秒的点，此时对应的tps和并发值，就是最佳平衡点。总之，测试采样越多，获取的平衡点就越准确

参考：https://mp.weixin.qq.com/s/p_3C7e65v7mwfth3tHUB9A